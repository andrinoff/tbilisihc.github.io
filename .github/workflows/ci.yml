name: Test buildability

on:
  pull_request:
    branches: 'master'

jobs:
  build:
	runs-on: ubuntu-latest
	steps:
	  - name: Checkout
		uses: actions/checkout@v4
	  - name: Install Node.js
        uses: actions/setup-node@v4
        with:
		  node-version: 20
		   cache: npm
	  - name: Install dependencies
		run: npm install
	  - name: Build
		run: npm run build
	  - name: Check build output
		run: |
		  if [ ! -d "build" ]; then
			echo "Build directory does not exist. Build failed.";
			exit 1;
		  fi
		  if [ -z "$(ls -A build)" ]; then
			echo "Build directory is empty. Build failed.";
			exit 1;
		  fi
		  echo "Build output is present and non-empty.";
		  echo "Build successful.";